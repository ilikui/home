<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影、书籍与音乐信息</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .item {
            border-bottom: 1px solid #eee;
            padding: 20px 0;
            display: flex;
            align-items: center;
        }

        .item img {
            width: 100px;
            height: auto;
            margin-right: 20px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .item-info {
            flex: 1;
        }

        .item-info h2 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .item-info p {
            margin: 5px 0;
        }

        .rating {
            font-size: 20px;
            color: #FFD700;
        }

        .tags {
            color: #666;
        }

        .item-info a {
            color: #007bff;
            text-decoration: none;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .pagination button {
            padding: 10px;
            margin: 0 5px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }

        .pagination button:disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>

<div class="container" id="contentContainer">
</div>

<div class="pagination">
    <button id="prevButton" onclick="loadData(currentPage - 1)">上一页</button>
    <button id="nextButton" onclick="loadData(currentPage + 1)">下一页</button>
</div>

<script>
    let currentPage = 1; // 当前页
    const itemsPerPage = 5; // 每页显示5条数据
    let allMovies = [];
    let allBooks = [];
    let allMusic = [];

    // 加载数据函数
    function loadData(page) {
        if (page < 1) return; // 防止分页小于1
        currentPage = page;

        // 更新显示的数据
        const startIdx = (currentPage - 1) * itemsPerPage;
        const endIdx = startIdx + itemsPerPage;

        const currentMovies = allMovies.slice(startIdx, endIdx);
        const currentBooks = allBooks.slice(startIdx, endIdx);
        const currentMusic = allMusic.slice(startIdx, endIdx);

        displayItems(currentMovies, 'movie');
        displayItems(currentBooks, 'book');
        displayItems(currentMusic, 'music');

        // 控制按钮是否可点击
        document.getElementById('prevButton').disabled = currentPage === 1;
        document.getElementById('nextButton').disabled = currentPage * itemsPerPage >= Math.max(allMovies.length, allBooks.length, allMusic.length);
    }

    // 显示数据项
    function displayItems(items, type) {
        const container = document.getElementById('contentContainer');
        const dataContainer = document.createElement('div');
        dataContainer.classList.add(type);

        items.forEach(item => {
            const itemDiv = document.createElement('div');
            itemDiv.classList.add('item');

            const img = document.createElement('img');
            img.src = item.subject.cover_url || item.subject.pic.normal;
            img.alt = item.subject.title;
            itemDiv.appendChild(img);

            const itemInfo = document.createElement('div');
            itemInfo.classList.add('item-info');

            const title = document.createElement('h2');
            title.textContent = item.subject.title;
            itemInfo.appendChild(title);

            const ratingText = item.sharing_text.match(/★+/);
            const rating = document.createElement('p');
            rating.classList.add('rating');
            rating.textContent = ratingText ? "评分: " + ratingText[0] : "暂无评分";
            itemInfo.appendChild(rating);

            const tags = document.createElement('p');
            tags.classList.add('tags');
            tags.textContent = "标签: " + (item.tags ? item.tags.join(', ') : "暂无标签");
            itemInfo.appendChild(tags);

            const link = document.createElement('a');
            link.href = item.subject.url;
            link.textContent = "了解更多";
            itemInfo.appendChild(link);

            itemDiv.appendChild(itemInfo);
            dataContainer.appendChild(itemDiv);
        });

        container.appendChild(dataContainer);
    }

    // 加载 JSON 数据
    function loadJSON() {
        // 加载电影数据
        fetch('static/data/movie.json')
            .then(response => response.json())
            .then(data => {
                allMovies = data;
                loadData(currentPage);
            });

        // 加载书籍数据
        fetch('static/data/book.json')
            .then(response => response.json())
            .then(data => {
                allBooks = data;
                loadData(currentPage);
            });

        // 加载音乐数据
        fetch('static/data/music.json')
            .then(response => response.json())
            .then(data => {
                allMusic = data;
                loadData(currentPage);
            });
    }

    // 页面加载完成后加载 JSON 数据
    window.onload = function() {
        loadJSON();
    };
</script>

</body>
</html>
