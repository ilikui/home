<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影信息</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .movie {
            border-bottom: 1px solid #eee;
            padding: 20px 0;
            display: flex;
            align-items: center;
        }

        .movie img {
            width: 100px; /* 固定图片宽度 */
            height: auto; /* 自动调整图片高度 */
            margin-right: 20px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .movie-info {
            flex: 1;
        }

        .movie-info h2 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .movie-info p {
            margin: 5px 0;
        }

        .rating {
            font-size: 20px;
            color: #FFD700;
        }

        .tags {
            color: #666;
        }

        .movie-info a {
            color: #007bff;
            text-decoration: none;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .pagination button {
            padding: 10px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
        }

        .pagination button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div class="container" id="moviesContainer">
</div>

<div class="pagination" id="paginationContainer">
</div>

<script>
    var moviesData; // 存储所有电影数据
    var currentPage = 1; // 当前页数
    var moviesPerPage = 5; // 每页显示的电影数量

    // 动态加载本地 JSON 文件并显示数据
    function loadLocalJSON() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4 && xhr.status === 200) {
                moviesData = JSON.parse(xhr.responseText);
                displayMovies(currentPage);
            }
        };
        xhr.open("GET", "../static/data/movie.json", true); // 替换为你的 JSON 文件路径
        xhr.send();
    }

    // 显示指定页数的电影数据
    function displayMovies(page) {
        var moviesContainer = document.getElementById("moviesContainer");
        moviesContainer.innerHTML = ''; // 清空之前的内容

        var startIndex = (page - 1) * moviesPerPage;
        var endIndex = startIndex + moviesPerPage;
        var paginatedMovies = moviesData.slice(startIndex, endIndex);

        paginatedMovies.forEach(function(movie) {
            var movieDiv = document.createElement("div");
            movieDiv.classList.add("movie");

            var img = document.createElement("img");
            img.src = movie.subject.pic.normal; // 电影海报图片地址
            img.alt = movie.subject.title; // 电影标题作为图片alt属性
            movieDiv.appendChild(img);

            var movieInfo = document.createElement("div");
            movieInfo.classList.add("movie-info");

            var title = document.createElement("h2");
            title.textContent = movie.subject.title; // 电影标题
            movieInfo.appendChild(title);

            var rating = document.createElement("p");
            rating.classList.add("rating");
            rating.textContent = "评分: ★★★★★".slice(0, movie.rating.star_count * 2); // 电影评分
            movieInfo.appendChild(rating);

            var tags = document.createElement("p");
            tags.classList.add("tags");
            tags.textContent = "标签: " + movie.tags.join(", "); // 电影标签
            movieInfo.appendChild(tags);

            var director = document.createElement("p");
            director.textContent = "导演: " + movie.subject.directors[0].name; // 电影导演
            movieInfo.appendChild(director);

            var actors = document.createElement("p");
            actors.textContent = "主演: " + movie.subject.actors.map(actor => actor.name).join(", "); // 电影主演
            movieInfo.appendChild(actors);

            var pubdate = document.createElement("p");
            pubdate.textContent = "上映日期: " + movie.subject.pubdate[0]; // 电影上映日期
            movieInfo.appendChild(pubdate);

            var link = document.createElement("a");
            link.href = movie.subject.url; // 跳转到电影详情页面链接
            link.textContent = "了解更多";
            movieInfo.appendChild(link);

            movieDiv.appendChild(movieInfo);
            moviesContainer.appendChild(movieDiv);
        });

        displayPagination();
    }

    // 显示分页按钮
    function displayPagination() {
        var paginationContainer = document.getElementById("paginationContainer");
        paginationContainer.innerHTML = ''; // 清空之前的内容

        var totalPages = Math.ceil(moviesData.length / moviesPerPage);
        for (var i = 1; i <= totalPages; i++) {
            var button = document.createElement("button");
            button.textContent = i;
            button.addEventListener("click", function() {
                currentPage = parseInt(this.textContent);
                displayMovies(currentPage);
            });
            paginationContainer.appendChild(button);
        }
    }

    // 页面加载完成后加载本地 JSON 数据
    window.onload = function() {
        loadLocalJSON();
    };
</script>

</body>
</html>
